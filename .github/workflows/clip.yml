name: _
on:
  workflow_dispatch:
      inputs:
        URL:
          required: true
          type: string
          description: "Link"
        SS:
          required: true
          type: string
          description: "Start Time"
        TO:
          required: true
          type: string
          description: "End Time"
        FILE_NAME:
          required: true
          type: string
          description: "Output FileName"
jobs:
  build:
    runs-on: ubuntu-22.04
    steps:
      - uses: actions/checkout@v4
      - name: ffmpeg
        run: |
             sudo apt install ffmpeg jq
             SS=$(jq -r '.inputs.SS' $GITHUB_EVENT_PATH)
             TO=$(jq -r '.inputs.TO' $GITHUB_EVENT_PATH)
             URL=$(jq -r '.inputs.URL' $GITHUB_EVENT_PATH)
             FILE_NAME=$(jq -r '.inputs.FILE_NAME' $GITHUB_EVENT_PATH)
             HH=$(cut -d: -f1 <<< "$SS")
             MM=$(cut -d: -f2 <<< "$SS")
             Ss=$(cut -d: -f3 <<< "$SS")
             ((Ss -= 5))
             if ((Ss < 0)); then
               ((MM -= 1))
               ((Ss += 60))
               if ((MM < 0)); then
                 ((HH -= 1))
                 ((MM += 60))
               fi
             fi
             echo "File=$PWD/$FILE_NAME" >> $GITHUB_ENV
             dgh=$('%02d:%02d:02d' $HH $MM $Ss)
             echo dgh
             echo dgh > 777
             #ffmpeg -ss "$SS" -copyts -start_at_zero -i "$URL" -ss "$SS" -to "$TO" -c copy -preset ultrafast "$FILE_NAME"
      - name: Upload file
        uses: actions/upload-artifact@v4
        with:
          name: clip
          path: 777
          compression-level: 9
